# In-Memory Database Console Application

**Описание:**
Интерактивное консольное приложение, имитирующее простую базу данных в памяти. Программа поддерживает команды для работы с ключ-значение, подсчёт значений, поиск ключей и транзакции (в том числе вложенные). Данные не сохраняются между сеансами.

---

## Команды

### Основные команды

| Команда             | Описание                                                                   |
| ------------------- | -------------------------------------------------------------------------- |
| `SET <key> <value>` | Сохраняет значение `value` по ключу `key`.                                 |
| `GET <key>`         | Получает значение по ключу `key`. Если ключ не найден, возвращает `NULL`.  |
| `UNSET <key>`       | Удаляет ключ из базы данных. Если ключа нет, ничего не делает.             |
| `COUNTS <value>`    | Показывает количество ключей с заданным значением.                         |
| `FIND <value>`      | Возвращает все ключи с заданным значением. Если ключи не найдены — `NULL`. |
| `END`               | Завершает приложение.                                                      |

### Транзакции

| Команда    | Описание                                                   |
| ---------- | ---------------------------------------------------------- |
| `BEGIN`    | Начало новой транзакции. Транзакции могут быть вложенными. |
| `ROLLBACK` | Откат текущей (самой внутренней) транзакции.               |
| `COMMIT`   | Фиксация изменений текущей (самой внутренней) транзакции.  |

---

## Примеры использования

```
> GET A
NULL
> SET A 10
> GET A
10
> COUNTS 10
1
> SET B 20
> SET C 10
> COUNTS 10
2
> UNSET B
> GET B
NULL
> END
```

### Вложенные транзакции

```
> SET A 10
> BEGIN
> SET A 20
> BEGIN
> SET A 30
> GET A
30
> ROLLBACK
> GET A
20
> COMMIT
> GET A
20
```

---

## Установка и запуск

1. Склонируйте репозиторий:

```bash
git clone https://github.com/te-sam/interactive_bd.git
cd interactive_bd
```

2. Убедитесь, что установлен Python 3.12+.

3. Установите зависимости
```bash
poetry install
```

3. Запуск программы:

```bash
poetry run python main.py
```

Программа работает в интерактивном режиме, ожидая ввода команд с клавиатуры.

---

## Структура проекта

```
main.py        # Основной файл с циклом ввода и функцией run_command
commands.py    # Модуль с реализацией команд и транзакций
utils.py       # Вспомогательные функции
README.md      # Документация
```

---

## Особенности

* Поддержка вложенных транзакций.
* Команды вводятся по одной строке. Аргументы не содержат пробелов.
* Все данные находятся в оперативной памяти и не сохраняются между сеансами.

---

## Тестирование

Для тестирования функций можно использовать `pytest`. Примеры тестов:

```bash
pytest tests/
```

Тесты проверяют:

* Основные команды (`SET`, `GET`, `UNSET`, `COUNTS`, `FIND`)
* Начало, откат и фиксацию транзакций (`BEGIN`, `ROLLBACK`, `COMMIT`)
* Вложенные транзакции
